<!DOCTYPE html>
<html data-controller="application"
      data-application-cloudinary-config-params="<%= cloudinary_config_params %>"
>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover">
    <title>Cookoon</title>
    <%= csrf_meta_tags %>
    <%= turbolinks_cache_control_meta_tag %>
    <%= favicon_link_tag %>

    <%= stylesheet_pack_tag 'application', media: :all, 'data-turbolinks-track': :reload %>

    <% if Rails.env.production? %>
      <%= render 'shared/marketing/google_analytics' %>
      <%= render 'shared/marketing/hotjar' %>
      <%= render 'shared/marketing/facebook_sdk' %>
      <%= render 'shared/marketing/linkedin_insight' %>
    <% end %>

    <%= javascript_pack_tag 'application', 'data-turbolinks-track': :reload, async: @device != :ios_inside %>
    <%= javascript_include_tag "https://maps.google.com/maps/api/js?libraries=places&key=#{ENV['GOOGLE_API_KEY']}", async: true %>
    <%= javascript_include_tag 'https://js.stripe.com/v3/', async: true %>
    <script type="text/javascript">window.$crisp=[];window.CRISP_WEBSITE_ID="1796ac7a-650c-4261-a39d-00b02b1ddf76";(function(){d=document;s=d.createElement("script");s.src="https://client.crisp.chat/l.js";s.async=1;d.getElementsByTagName("head")[0].appendChild(s);})();</script>
  </head>

  <body class="<%= yield(:body_class) %>" data-controller="application-navigation" >
    <%= render 'shared/loader' %>

    <%= c 'navbar_cookoon',
          type: content_for?(:navbar_type) ? yield(:navbar_type) : :menu,
          back_url: content_for?(:navbar_back_url) ? yield(:navbar_back_url) : nil,
          content: content_for?(:navbar_content) ? yield(:navbar_content) : nil %>

    <%= c 'drawer' %>

    <%= render 'shared/pretender_infos' %>

    <div id="flash">
      <%= render 'shared/flashes' %>
    </div>

    <%= yield %>
  </body>
</html>
