<div class="modal-header">
  <button type="button" class="close op-90 text-shadow-none fs-24" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <h4 class="modal-title" id="recapModalLabel">Votre réservation</h4>
</div>

<%= simple_form_for [@cookoon, @reservation], remote: true do |f| %>
<div class="modal-body">
  <div class="recap">
    <div class="text-left">
      <span id="cookoon-price" data-cookoon-price-cents="<%= @cookoon.price_cents %>" class="recap-price">
        <%= humanized_money_with_symbol @cookoon.price %> par heure
      </span>
    </div>
    <div class="recap-datetime">
      <p>Vous arrivez le:</p>
      <%= f.input :date,
                  label: false,
                  as: :string,
                  readonly: true,
                  input_html: {
                    value: display_datetime_for(
                      @reservation.date,
                      join_expression: 'à',
                      without_year: true,
                      time_separator: ':'
                    ),
                    data: {
                      controller: 'datetimepickers',
                      target: 'datetimepickers.dateInput'
                    }
                  }
    %>
    </div>
    <div class="recap-duration">
      <p>Pour une durée de :</p>
      <div class="increment-block" data-input="#reservation_duration" data-field="#duration">
        <i class="fa fa-minus-circle control" aria-hidden="true" data-action="minus"></i>
        <div id="hours"><span id="duration"><%= @reservation.duration %></span> Heure(s)</div>
        <i class="fa fa-plus-circle control" aria-hidden="true" data-action="plus"></i>
      </div>
      <%= f.input :duration, input_html: {value: @reservation.duration, data: {min: 1, max: 5}}, as: :hidden %>
    </div>
  </div>
  <div class="recap-catering">
    <div class="flex-container">
      <div class='service-presentation'>
        <p class="service-description">
          Je souhaite être contacté par le service traiteur
        </p>
      </div>
      <!-- ==== CUSTOM CHECKBOX ==== -->
      <div class="service-input">
        <div class="form-group boolean optional reservation_catering">
          <input value="0" type="hidden" name="reservation[catering]">
          <input class="boolean optional hidden" type="checkbox" value="1" name="reservation[catering]" id="reservation_catering">
          <label class="boolean optional toggle" for="reservation_catering">
            <span class="toggle-handler"></span>
          </label>
        </div>
      </div>
      <!-- ==== FIN CUSTOM CHECKBOX ==== -->
    </div>
  </div>
  <%= f.error :cookoon %>
</div>
<div class="modal-footer">
  <h4>TOTAL : <span id='total-price'><%= humanized_money_with_symbol @reservation.price_for_rent_with_fees %></span></h4>
  <p style="font-size:12px; margin-bottom: 20px">Ce montant comprend les frais de services de la plateforme Cookoon</p>
  <% if current_user.stripe_customer_id %>
    <%= f.button :button, 'RESERVER', type: :submit, class: "button button-white", data: { disable_with: '<i class="fa fa-spinner fa-spin" style="margin-right: 10px;"></i>Chargement'.html_safe } %>
  <% else %>
  <div class="text-center thin-padded">
    <div class="thin-padded">
      <p>Vous n'avez aucun moyen de paiement</p>
      <p>Vous devez en ajouter un avant de pouvoir faire une demande de réservation</p>
    </div>
    <%= link_to 'Ajouter une carte', credit_cards_path, class: 'button button-white' %>
  </div>
  <% end %>
</div>
<% end %>
